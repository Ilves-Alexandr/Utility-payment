{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\San\\\\Desktop\\\\projects\\\\test\\\\client\\\\src\\\\components\\\\PostList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PostList = () => {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    const fetchPosts = async () => {\n      try {\n        const res = await axios.get('http://localhost:5000/api/posts');\n        console.log(res.data); // Посмотреть все данные\n        res.data.forEach(post => {\n          console.log(`Post ID: ${post._id}, Created At: ${post.createdAt}`);\n        });\n        setPosts(res.data);\n      } catch (err) {\n        console.error('Error fetching posts:', err);\n        setError(err.response ? err.response.data.msg : 'Something went wrong'); // Сохраняем сообщение об ошибке в состоянии\n      }\n    };\n    fetchPosts();\n  }, []);\n  const handleDelete = async id => {\n    try {\n      await axios.delete(`http://localhost:5000/api/posts/${id}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      // Обновляем состояние, исключая удаленный пост\n      setPosts(posts.filter(post => post._id !== id));\n    } catch (err) {\n      console.error('Error deleting post:', err);\n      setError(err.response ? err.response.data.msg : 'Something went wrong'); // Сохраняем сообщение об ошибке в состоянии\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Posts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/create\",\n      children: \"Create New Post!!!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: posts.map(post => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: post.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: post.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Created At:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 16\n          }, this), \" \", new Date(post.createdAt).toLocaleString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: `/edit/${post._id}`,\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(post._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this)]\n      }, post._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n_s(PostList, \"q/y3GZQxjsT86oPUbeQR6Qlz1Qg=\");\n_c = PostList;\nexport default PostList;\nvar _c;\n$RefreshReg$(_c, \"PostList\");","map":{"version":3,"names":["React","useState","useEffect","axios","Link","jsxDEV","_jsxDEV","PostList","_s","posts","setPosts","error","setError","fetchPosts","res","get","console","log","data","forEach","post","_id","createdAt","err","response","msg","handleDelete","id","delete","headers","Authorization","localStorage","getItem","filter","children","fileName","_jsxFileName","lineNumber","columnNumber","to","map","title","content","Date","toLocaleString","onClick","style","color","_c","$RefreshReg$"],"sources":["C:/Users/San/Desktop/projects/test/client/src/components/PostList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst PostList = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [error, setError] = useState('');\r\n\r\n\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      try {\r\n        const res = await axios.get('http://localhost:5000/api/posts');\r\n        console.log(res.data); // Посмотреть все данные\r\n        res.data.forEach(post => {\r\n          console.log(`Post ID: ${post._id}, Created At: ${post.createdAt}`);\r\n        });\r\n        setPosts(res.data);\r\n      } catch (err) {\r\n        console.error('Error fetching posts:', err);\r\n        setError(err.response ? err.response.data.msg : 'Something went wrong'); // Сохраняем сообщение об ошибке в состоянии\r\n        \r\n      }\r\n    };\r\n\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/posts/${id}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n        },\r\n      });\r\n       // Обновляем состояние, исключая удаленный пост\r\n      setPosts(posts.filter((post) => post._id !== id));\r\n    } catch (err) {\r\n      console.error('Error deleting post:', err);\r\n      setError(err.response ? err.response.data.msg : 'Something went wrong'); // Сохраняем сообщение об ошибке в состоянии\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Posts</h1>\r\n      <Link to=\"/create\">Create New Post!!!</Link>\r\n      <ul>\r\n        {posts.map((post) => (\r\n          <li key={post._id}>\r\n            <h2>{post.title}</h2>\r\n            <p>{post.content}</p>\r\n            <p><strong>Created At:</strong> {new Date(post.createdAt).toLocaleString()}</p>\r\n            <Link to={`/edit/${post._id}`}>Edit</Link>\r\n            <button onClick={() => handleDelete(post._id)}>Delete</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      {error && <p style={{ color: 'red' }}>{error}</p>} {/* Отображение сообщения об ошибке */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}