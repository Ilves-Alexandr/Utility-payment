{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import{Box,Button,Typography,Alert,Card,CardContent,List,ListItem,Container}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||\"http://localhost:5000\";const PostList=_ref=>{let{isAuthenticated}=_ref;const[posts,setPosts]=useState([]);const[error,setError]=useState('');useEffect(()=>{const fetchPosts=async()=>{try{const res=await axios.get(`${API_URL}/api/posts`);setPosts(res.data);}catch(err){setError(err.response?err.response.data.msg:'Something went wrong');}};fetchPosts();},[]);const handleDelete=async id=>{try{await axios.delete(`${API_URL}/api/posts/${id}`,{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});setPosts(posts.filter(post=>post._id!==id));}catch(err){setError(err.response?err.response.data.msg:'Something went wrong');}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-betweem',flexDirection:'column',marginTop:2,maxWidth:400,margin:'0 auto',gap:2},children:[/*#__PURE__*/_jsx(Button,{component:Link,to:\"/\",variant:\"contained\",color:\"primary\",children:\"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\"}),/*#__PURE__*/_jsx(Button,{component:Link,to:!isAuthenticated?\"/login\":\"/register\",variant:\"contained\",color:\"primary\",children:!isAuthenticated?'Авторизация':'Регистрация'}),/*#__PURE__*/_jsx(Button,{component:Link,to:\"/transactions\",variant:\"contained\",color:\"primary\",children:\"\\u0422\\u041D\\u0421\"}),/*#__PURE__*/_jsx(Button,{component:Link,to:\"/tgks\",variant:\"contained\",color:\"primary\",children:\"\\u0422\\u0413\\u041A\"}),/*#__PURE__*/_jsx(Button,{component:Link,to:\"/waters\",variant:\"contained\",color:\"primary\",children:\"\\u0412\\u043E\\u0434\\u043E\\u043A\\u0430\\u043D\\u0430\\u043B\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"\\u0417\\u0430\\u043C\\u0435\\u0442\\u043A\\u0438\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{marginBottom:2},children:error}),/*#__PURE__*/_jsx(Box,{sx:{marginBottom:2},children:/*#__PURE__*/_jsx(Link,{to:\"/create\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0437\\u0430\\u043C\\u0435\\u0442\\u043A\\u0443\"})})}),/*#__PURE__*/_jsx(List,{children:posts.map(post=>/*#__PURE__*/_jsx(ListItem,{sx:{marginBottom:2,border:'1px solid #ccc',borderRadius:'4px'},children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",sx:{width:'100%'},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:post.title}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:post.content}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"textSecondary\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u043D\\u043E:\"}),\" \",new Date(Date.parse(post.createdAt)).toLocaleString()]}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"textSecondary\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041E\\u0442\\u0440\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u043E:\"}),\" \",new Date(Date.parse(post.updatedAt)).toLocaleString()]}),/*#__PURE__*/_jsxs(Box,{sx:{marginTop:2},children:[/*#__PURE__*/_jsx(Link,{to:`/edit/${post._id}`,children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",sx:{marginRight:1},children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"})}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"error\",onClick:()=>handleDelete(post._id),children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]})})},post._id))})]});};export default PostList;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","Box","Button","Typography","Alert","Card","CardContent","List","ListItem","Container","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","PostList","_ref","isAuthenticated","posts","setPosts","error","setError","fetchPosts","res","get","data","err","response","msg","handleDelete","id","delete","headers","Authorization","localStorage","getItem","filter","post","_id","children","sx","display","justifyContent","flexDirection","marginTop","maxWidth","margin","gap","component","to","variant","color","gutterBottom","severity","marginBottom","map","border","borderRadius","width","title","content","Date","parse","createdAt","toLocaleString","updatedAt","marginRight","onClick"],"sources":["C:/Users/San/Desktop/projects/testTest — копия/client/src/components/PostList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Typography,\r\n  Alert,\r\n  Card,\r\n  CardContent,\r\n  List,\r\n  ListItem,\r\n  Container,\r\n} from '@mui/material';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\r\n\r\nconst PostList = ({ isAuthenticated }) => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      try {\r\n        const res = await axios.get(`${API_URL}/api/posts`);\r\n        setPosts(res.data);\r\n      } catch (err) {\r\n        setError(err.response ? err.response.data.msg : 'Something went wrong');\r\n      }\r\n    };\r\n\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await axios.delete(`${API_URL}/api/posts/${id}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n        },\r\n      });\r\n      setPosts(posts.filter((post) => post._id !== id));\r\n    } catch (err) {\r\n      setError(err.response ? err.response.data.msg : 'Something went wrong');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <Box sx={{\r\n        display: 'flex',\r\n        justifyContent: 'space-betweem',\r\n        flexDirection: 'column',\r\n        marginTop: 2,\r\n        maxWidth: 400,\r\n        margin: '0 auto',\r\n        gap: 2\r\n      }}>\r\n        <Button component={Link} to=\"/\" variant=\"contained\" color=\"primary\">\r\n          Главная\r\n        </Button>\r\n        <Button component={Link} to={!isAuthenticated ? \"/login\" : \"/register\"} variant=\"contained\" color=\"primary\">\r\n          {!isAuthenticated ? 'Авторизация' : 'Регистрация'}\r\n        </Button>\r\n        <Button component={Link} to=\"/transactions\" variant=\"contained\" color=\"primary\">\r\n          ТНС\r\n        </Button>\r\n        <Button component={Link} to=\"/tgks\" variant=\"contained\" color=\"primary\">\r\n          ТГК\r\n        </Button>\r\n        <Button component={Link} to=\"/waters\" variant=\"contained\" color=\"primary\">\r\n          Водоканал\r\n        </Button>\r\n      </Box>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        Заметки\r\n      </Typography>\r\n\r\n      {error && <Alert severity=\"error\" sx={{ marginBottom: 2 }}>{error}</Alert>}\r\n      <Box sx={{ marginBottom: 2 }}>\r\n        <Link to=\"/create\">\r\n          <Button variant=\"contained\" color=\"primary\">Создать заметку</Button>\r\n        </Link>\r\n      </Box>\r\n\r\n      <List>\r\n        {posts.map((post) => (\r\n          <ListItem key={post._id} sx={{ marginBottom: 2, border: '1px solid #ccc', borderRadius: '4px' }}>\r\n            <Card variant=\"outlined\" sx={{ width: '100%' }}>\r\n              <CardContent>\r\n                <Typography variant=\"h6\">{post.title}</Typography>\r\n                <Typography variant=\"body2\" color=\"textSecondary\">{post.content}</Typography>\r\n                <Typography variant=\"caption\" color=\"textSecondary\">\r\n                  <strong>Создано:</strong> {new Date(Date.parse(post.createdAt)).toLocaleString()}\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"textSecondary\">\r\n                  <strong>Отредактировано:</strong> {new Date(Date.parse(post.updatedAt)).toLocaleString()}\r\n                </Typography>\r\n                <Box sx={{ marginTop: 2 }}>\r\n                  <Link to={`/edit/${post._id}`}>\r\n                    <Button variant=\"outlined\" color=\"primary\" sx={{ marginRight: 1 }}>\r\n                      Редактировать\r\n                    </Button>\r\n                  </Link>\r\n                  <Button variant=\"outlined\" color=\"error\" onClick={() => handleDelete(post._id)}>\r\n                    Удалить\r\n                  </Button>\r\n                </Box>\r\n              </CardContent>\r\n            </Card>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default PostList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}