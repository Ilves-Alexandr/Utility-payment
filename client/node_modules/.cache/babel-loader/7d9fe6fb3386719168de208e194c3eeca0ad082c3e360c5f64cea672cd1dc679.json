{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{useNavigate,Link}from'react-router-dom';import{Box,TextField,Button,Typography,Alert}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||\"http://localhost:5000\";const AuthForm=()=>{const[username,setUsername]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[isRegister,setIsRegister]=useState(false);const[error,setError]=useState('');const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();try{const response=!isRegister?await axios.post(`${API_URL}/api/users/register`,{username,email,password}):await axios.post(`${API_URL}/api/users/login`,{email,password});localStorage.setItem('token',response.data.token);navigate('/posts');}catch(err){setError(err.response?err.response.data.msg:'Something went wrong');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-betweem',flexDirection:'column',marginTop:2,maxWidth:400,margin:'0 auto',gap:2},children:[/*#__PURE__*/_jsx(Button,{component:Link,variant:\"contained\",to:\"/\",color:\"primary\",children:\"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\"}),/*#__PURE__*/_jsx(Button,{component:Link,to:!isRegister?'/login':'/register'// Условная ссылка на страницу\n,variant:\"contained\",color:\"primary\",onClick:()=>setIsRegister(!isRegister)// Переключение состояния при клике\n,children:!isRegister?'Авторизация':'Регистрация'}),/*#__PURE__*/_jsx(Button,{component:Link,variant:\"contained\",to:\"/posts\",color:\"primary\",children:\"\\u0417\\u0430\\u043C\\u0435\\u0442\\u043A\\u0438\"}),/*#__PURE__*/_jsx(Button,{component:Link,variant:\"contained\",to:\"/transactions\",color:\"primary\",children:\"\\u0422\\u041D\\u0421\"}),/*#__PURE__*/_jsx(Button,{component:Link,variant:\"contained\",to:\"/tgks\",color:\"primary\",children:\"\\u0422\\u0413\\u041A\"}),/*#__PURE__*/_jsx(Button,{component:Link,variant:\"contained\",to:\"/waters\",color:\"primary\",children:\"\\u0412\\u043E\\u0434\\u043E\\u043A\\u0430\\u043D\\u0430\\u043B\"})]}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,sx:{display:'flex',flexDirection:'column',gap:2,maxWidth:400,margin:'0 auto',padding:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",children:!isRegister?'Регистрация':'Авторизация'}),!isRegister&&/*#__PURE__*/_jsx(TextField,{label:\"Username\",variant:\"outlined\",value:username,onChange:e=>setUsername(e.target.value),fullWidth:true}),/*#__PURE__*/_jsx(TextField,{label:\"Email\",type:\"email\",variant:\"outlined\",value:email,onChange:e=>setEmail(e.target.value),fullWidth:true,required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Password\",type:\"password\",variant:\"outlined\",value:password,onChange:e=>setPassword(e.target.value),fullWidth:true,required:true}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",type:\"submit\",fullWidth:true,children:!isRegister?'Регистрация':'Авторизация'}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error})]})]});};export default AuthForm;","map":{"version":3,"names":["React","useState","axios","useNavigate","Link","Box","TextField","Button","Typography","Alert","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","process","env","REACT_APP_API_URL","AuthForm","username","setUsername","email","setEmail","password","setPassword","isRegister","setIsRegister","error","setError","navigate","handleSubmit","e","preventDefault","response","post","localStorage","setItem","data","token","err","msg","children","sx","display","justifyContent","flexDirection","marginTop","maxWidth","margin","gap","component","variant","to","color","onClick","onSubmit","padding","align","label","value","onChange","target","fullWidth","type","required","severity"],"sources":["C:/Users/San/Desktop/projects/testTest — копия/client/src/components/AuthForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { Box, TextField, Button, Typography, Alert } from '@mui/material';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\r\n\r\nconst AuthForm = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [isRegister, setIsRegister] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = !isRegister\r\n        ? await axios.post(`${API_URL}/api/users/register`, { username, email, password })\r\n        : await axios.post(`${API_URL}/api/users/login`, { email, password });\r\n\r\n      localStorage.setItem('token', response.data.token);\r\n      navigate('/posts');\r\n    } catch (err) {\r\n      setError(err.response ? err.response.data.msg : 'Something went wrong');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{\r\n        display: 'flex',\r\n        justifyContent: 'space-betweem',\r\n        flexDirection: 'column',\r\n        marginTop: 2,\r\n        maxWidth: 400,\r\n        margin: '0 auto',\r\n        gap: 2\r\n      }}>\r\n        <Button component={Link} variant=\"contained\" to=\"/\" color=\"primary\">\r\n          Главная\r\n        </Button>\r\n        <Button\r\n          component={Link}\r\n          to={!isRegister ? '/login' : '/register'}  // Условная ссылка на страницу\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={() => setIsRegister(!isRegister)}  // Переключение состояния при клике\r\n        >\r\n          {!isRegister ? 'Авторизация' : 'Регистрация'}\r\n        </Button>\r\n        \r\n        <Button component={Link} variant=\"contained\" to=\"/posts\" color=\"primary\">\r\n          Заметки\r\n        </Button>\r\n        <Button component={Link} variant=\"contained\" to=\"/transactions\" color=\"primary\">\r\n          ТНС\r\n        </Button>\r\n        <Button component={Link} variant=\"contained\" to=\"/tgks\" color=\"primary\">\r\n          ТГК\r\n        </Button>\r\n        <Button component={Link} variant=\"contained\" to=\"/waters\" color=\"primary\">\r\n          Водоканал\r\n        </Button>\r\n      </Box>\r\n      <Box\r\n        component=\"form\"\r\n        onSubmit={handleSubmit}\r\n        sx={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          gap: 2,\r\n          maxWidth: 400,\r\n          margin: '0 auto',\r\n          padding: 2,\r\n        }}\r\n      >\r\n        <Typography variant=\"h4\" align=\"center\">\r\n          {!isRegister ? 'Регистрация' : 'Авторизация'}\r\n        </Typography>\r\n\r\n        {!isRegister && (\r\n          <TextField\r\n            label=\"Username\"\r\n            variant=\"outlined\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            fullWidth\r\n          />\r\n        )}\r\n\r\n        <TextField\r\n          label=\"Email\"\r\n          type=\"email\"\r\n          variant=\"outlined\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          fullWidth\r\n          required\r\n        />\r\n\r\n        <TextField\r\n          label=\"Password\"\r\n          type=\"password\"\r\n          variant=\"outlined\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          fullWidth\r\n          required\r\n        />\r\n\r\n        <Button variant=\"contained\" color=\"primary\" type=\"submit\" fullWidth>\r\n          {!isRegister ? 'Регистрация' : 'Авторизация'}\r\n        </Button>\r\n\r\n        {error && (\r\n          <Alert severity=\"error\">\r\n            {error}\r\n          </Alert>\r\n        )}\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AuthForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}